{
  "version": "0.1.0",
  "initial_passage": "Start",
  "imports": [],
  "passages": {
    "Start": {
      "id": "Start",
      "content": [
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "Your health: "
        },
        {
          "type": "expression",
          "code": "health"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "conditional",
          "branches": [
            {
              "condition": "health > 75",
              "content": [
                {
                  "type": "text",
                  "value": "You feel strong and healthy!"
                }
              ]
            },
            {
              "condition": "health > 50",
              "content": [
                {
                  "type": "text",
                  "value": "You're doing okay."
                }
              ]
            },
            {
              "condition": "health > 25",
              "content": [
                {
                  "type": "text",
                  "value": "You're injured."
                }
              ]
            },
            {
              "condition": "True",
              "content": [
                {
                  "type": "text",
                  "value": "You're barely alive!"
                }
              ]
            }
          ]
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        }
      ],
      "choices": [
        {
          "text": "Take damage",
          "target": "TakeDamage",
          "condition": null
        },
        {
          "text": "Heal",
          "target": "Heal",
          "condition": null
        }
      ],
      "execute": [
        {
          "type": "set_var",
          "var": "health",
          "expression": "100"
        }
      ]
    },
    "TakeDamage": {
      "id": "TakeDamage",
      "content": [
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "You took damage!"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "Health: "
        },
        {
          "type": "expression",
          "code": "health"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "conditional",
          "branches": [
            {
              "condition": "health > 0",
              "content": [
                {
                  "type": "text",
                  "value": "You're still standing."
                }
              ]
            },
            {
              "condition": "True",
              "content": [
                {
                  "type": "text",
                  "value": "You collapsed!"
                }
              ]
            }
          ]
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        }
      ],
      "choices": [
        {
          "text": "Continue",
          "target": "Start",
          "condition": null
        }
      ],
      "execute": [
        {
          "type": "set_var",
          "var": "health",
          "expression": "health - 30"
        }
      ]
    },
    "Heal": {
      "id": "Heal",
      "content": [
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "You healed!"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "Health: "
        },
        {
          "type": "expression",
          "code": "health"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "conditional",
          "branches": [
            {
              "condition": "health == 100",
              "content": [
                {
                  "type": "text",
                  "value": "You're at full health!"
                }
              ]
            },
            {
              "condition": "True",
              "content": [
                {
                  "type": "text",
                  "value": "You still need more healing."
                }
              ]
            }
          ]
        },
        {
          "type": "text",
          "value": "\n"
        },
        {
          "type": "text",
          "value": "\n"
        }
      ],
      "choices": [
        {
          "text": "Continue",
          "target": "Start",
          "condition": null
        }
      ],
      "execute": [
        {
          "type": "set_var",
          "var": "health",
          "expression": "min(100, health + 40)"
        }
      ]
    }
  }
}